(function(){function e(){}function c(a,b){this.path=a;typeof b!=="undefined"&&b!==null?(this.at_2x_path=b,this.perform_check=!1):(this.at_2x_path=a.replace(/\.\w+$/,function(a){return"@2x"+a}),this.perform_check=!0)}function f(a){this.el=a;this.path=new c(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));var b=this;this.path.check_2x_variant(function(a){a&&b.swap()})}var d=typeof exports=="undefined"?window:exports,g={check_mime_type:!0};d.Retina=e;e.configure=function(a){a==null&&(a=
{});for(var b in a)g[b]=a[b]};e.init=function(a){a==null&&(a=d);var b=a.onload||new Function;a.onload=function(){var a=document.getElementsByTagName("img"),d=[],c,e;for(c=0;c<a.length;c++)e=a[c],d.push(new f(e));b()}};e.isRetina=function(){return d.devicePixelRatio>1?!0:d.matchMedia&&d.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),                      (min--moz-device-pixel-ratio: 1.5),                      (-o-min-device-pixel-ratio: 3/2),                      (min-resolution: 1.5dppx)").matches?
!0:!1};d.RetinaImagePath=c;c.confirmed_paths=[];c.prototype.is_external=function(){return!(!this.path.match(/^http?\:/i)||this.path.match("//"+document.domain))};c.prototype.check_2x_variant=function(a){var b,d=this;if(this.is_external())return a(!1);else if(!this.perform_check&&typeof this.at_2x_path!=="undefined"&&this.at_2x_path!==null)return a(!0);else if(this.at_2x_path in c.confirmed_paths)return a(!0);else b=new XMLHttpRequest,b.open("HEAD",this.at_2x_path),b.onreadystatechange=function(){if(b.readyState!=
4)return a(!1);if(b.status>=200&&b.status<=399){if(g.check_mime_type){var e=b.getResponseHeader("Content-Type");if(e==null||!e.match(/^image/i))return a(!1)}c.confirmed_paths.push(d.at_2x_path);return a(!0)}else return a(!1)},b.send()};d.RetinaImage=f;f.prototype.swap=function(a){function b(){c.el.complete?(c.el.setAttribute("width",c.el.offsetWidth),c.el.setAttribute("height",c.el.offsetHeight),c.el.setAttribute("src",a)):setTimeout(b,5)}if(typeof a=="undefined")a=this.path.at_2x_path;var c=this;
b()};e.init(d)})();
